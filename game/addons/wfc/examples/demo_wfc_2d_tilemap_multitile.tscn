[gd_scene load_steps=14 format=3 uid="uid://do26y4bs02o2g"]

[ext_resource type="TileSet" uid="uid://cktgrugyovpdr" path="res://game-specific/game_6/new_tile_set.tres" id="1_8cqgr"]
[ext_resource type="Script" path="res://addons/wfc/nodes/generator_2d.gd" id="2_lei82"]
[ext_resource type="Script" path="res://addons/wfc/problems/2d/mappers/mapper_2d_layered_tilemap.gd" id="3_x6bkc"]
[ext_resource type="Script" path="res://addons/wfc/utils/bitmatrix.gd" id="3_xkmgf"]
[ext_resource type="Script" path="res://addons/wfc/problems/2d/mappers/mapper_2d_multitile.gd" id="4_81wi2"]
[ext_resource type="Script" path="res://addons/wfc/problems/2d/rules_2d.gd" id="5_5pb0u"]
[ext_resource type="Script" path="res://addons/wfc/solver/solver_settings.gd" id="6_7k31g"]
[ext_resource type="PackedScene" uid="uid://dt2nffs32s7o1" path="res://addons/wfc/examples/helpers/progress_indicator.tscn" id="6_673hp"]

[sub_resource type="GDScript" id="GDScript_sr34g"]
script/source = "extends Node2D

func _ready():
	$sample.hide()
	$target.show()
	$WFC2DGenerator.start()
"

[sub_resource type="Resource" id="Resource_wtrul"]
script = ExtResource("3_x6bkc")
attrs_to_id = {}
layers = Array[int]([])
use_builtin_probabilities = true
probability_meta_key = "wfc_probability"

[sub_resource type="Resource" id="Resource_j67ip"]
script = ExtResource("4_81wi2")
mapper = SubResource("Resource_wtrul")
tile_size = Vector2i(3, 3)
offset = Vector2i(0, 0)
allow_partial = false
tiles_to_id = {}
probability_meta_key = "wfc_probability"

[sub_resource type="Resource" id="Resource_pa1tk"]
script = ExtResource("5_5pb0u")
mapper = SubResource("Resource_j67ip")
complete_matrices = true
axes = Array[Vector2i]([Vector2i(0, 1), Vector2i(1, 0)])
axis_matrices = Array[ExtResource("3_xkmgf")]([])
probabilities = []
probabilities_enabled = true
edge_condition_meta_name = "wfc_edge"

[sub_resource type="Resource" id="Resource_30nyt"]
script = ExtResource("6_7k31g")
allow_backtracking = true
require_backtracking = false
backtracking_limit = -1
sparse_history_start = 10
sparse_history_interval = 10
force_ac3 = true

[node name="DemoWfc2dTilemapMultitile" type="Node2D"]
script = SubResource("GDScript_sr34g")

[node name="sample" type="TileMap" parent="."]
scale = Vector2(20, 20)
tile_set = ExtResource("1_8cqgr")
format = 2
layer_0/tile_data = PackedInt32Array(0, 0, 0, 65536, 0, 0, 131072, 0, 0, 196608, 0, 0, 262144, 65536, 0, 327680, 0, 0, 393216, 0, 0, 458752, 0, 0, 524288, 0, 0, 1, 0, 0, 65537, 0, 0, 131073, 0, 0, 196609, 0, 0, 262145, 65536, 0, 327681, 0, 0, 393217, 0, 0, 458753, 0, 0, 524289, 0, 0, 2, 0, 0, 65538, 0, 0, 131074, 0, 0, 196610, 0, 0, 262146, 65536, 0, 327682, 0, 0, 393218, 0, 0, 458754, 0, 0, 524290, 0, 0, 3, 0, 0, 65539, 0, 0, 131075, 0, 0, 196611, 0, 0, 262147, 65536, 0, 327683, 0, 0, 393219, 0, 0, 458755, 0, 0, 524291, 0, 0, 4, 65536, 0, 65540, 65536, 0, 131076, 65536, 0, 196612, 65536, 0, 262148, 65536, 0, 327684, 65536, 0, 393220, 65536, 0, 458756, 65536, 0, 524292, 65536, 0, 5, 0, 0, 65541, 0, 0, 131077, 0, 0, 196613, 0, 0, 262149, 65536, 0, 327685, 0, 0, 393221, 0, 0, 458757, 0, 0, 524293, 0, 0, 6, 0, 0, 65542, 0, 0, 131078, 0, 0, 196614, 0, 0, 262150, 65536, 0, 327686, 0, 0, 393222, 0, 0, 458758, 0, 0, 524294, 0, 0, 7, 0, 0, 65543, 0, 0, 131079, 0, 0, 196615, 0, 0, 262151, 65536, 0, 327687, 0, 0, 393223, 0, 0, 458759, 0, 0, 524295, 0, 0, 8, 0, 0, 65544, 0, 0, 131080, 0, 0, 196616, 0, 0, 262152, 65536, 0, 327688, 0, 0, 393224, 0, 0, 458760, 0, 0, 524296, 0, 0)

[node name="target" type="TileMap" parent="."]
scale = Vector2(20, 20)
tile_set = ExtResource("1_8cqgr")
format = 2

[node name="WFC2DGenerator" type="Node" parent="."]
script = ExtResource("2_lei82")
target = NodePath("../target")
rect = Rect2i(0, 0, 40, 23)
rules = SubResource("Resource_pa1tk")
positive_sample = NodePath("../sample")
solver_settings = SubResource("Resource_30nyt")
render_intermediate_results = true

[node name="progressIndicator" parent="." node_paths=PackedStringArray("generator") instance=ExtResource("6_673hp")]
generator = NodePath("../WFC2DGenerator")
